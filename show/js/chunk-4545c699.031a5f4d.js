(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4545c699"],{"11e9":function(e,t,i){var n=i("52a7"),o=i("4630"),r=i("6821"),a=i("6a99"),s=i("69a8"),l=i("c69a"),h=Object.getOwnPropertyDescriptor;t.f=i("9e1e")?h:function(e,t){if(e=r(e),t=a(t,!0),l)try{return h(e,t)}catch(i){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},"22b5":function(e,t,i){"use strict";(function(e){var t;t="undefined"===typeof self&&"undefined"!==typeof e&&e.hrtime?function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var i=t,n=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;e=void 0!==e?e:i();while(n.length>0){this._tweensAddedDuringUpdate={};for(var o=0;o<n.length;o++){var r=this._tweens[n[o]];r&&!1===r.update(e)&&!t&&delete this._tweens[n[o]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),o={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Bounce.In(2*e):.5*o.Bounce.Out(2*e-1)+.5}}},r={Linear:function(e,t){var i=e.length-1,n=i*t,o=Math.floor(n),a=r.Utils.Linear;return t<0?a(e[0],e[1],n):t>1?a(e[i],e[i-1],i-n):a(e[o],e[o+1>i?i:o+1],n-o)},Bezier:function(e,t){for(var i=0,n=e.length-1,o=Math.pow,a=r.Utils.Bernstein,s=0;s<=n;s++)i+=o(1-t,n-s)*o(t,s)*e[s]*a(n,s);return i},CatmullRom:function(e,t){var i=e.length-1,n=i*t,o=Math.floor(n),a=r.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(o=Math.floor(n=i*(1+t))),a(e[(o-1+i)%i],e[o],e[(o+1)%i],e[(o+2)%i],n-o)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-n)-e[0]):t>1?e[i]-(a(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]):a(e[o?o-1:0],e[o],e[i<o+1?i:o+1],e[i<o+2?i:o+2],n-o)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=r.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:function(){var e=[1];return function(t){var i=1;if(e[t])return e[t];for(var n=t;n>1;n--)i*=n;return e[t]=i,i}}(),CatmullRom:function(e,t,i,n,o){var r=.5*(i-e),a=.5*(n-t),s=o*o,l=o*s;return(2*t-2*i+r+a)*l+(-3*t+3*i-2*r-a)*s+r*o+t}}},a=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),s=function(){function e(e,t){void 0===t&&(t=u),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=u.Easing.Linear.None,this._interpolationFunction=u.Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=u.nextId(),this._isChainStopped=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){for(var i in e)this._valuesEnd[i]=e[i];return void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"===typeof e?u.now()+parseFloat(e):e:u.now(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,i,n){for(var o in i){var r=e[o],a=Array.isArray(r),s=a?"array":typeof r,l=!a&&Array.isArray(i[o]);if("undefined"!==s&&"function"!==s){if(l){var h=i[o];if(0===h.length)continue;h=h.map(this._handleRelativeValue.bind(this,r)),i[o]=[r].concat(h)}if("object"!==s&&!a||!r||l)"undefined"===typeof t[o]&&(t[o]=r),a||(t[o]*=1),n[o]=l?i[o].slice().reverse():t[o]||0;else{for(var d in t[o]=a?[]:{},r)t[o][d]=r[d];n[o]=a?[]:{},this._setupProperties(r,t[o],i[o],n[o])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this.update(1/0),this},e.prototype.pause=function(e){return this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=void 0===e?u.now():e,this._group.remove(this)),this},e.prototype.resume=function(e){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===e?u.now():e)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e){var t,i,n=this._startTime+this._duration;if(e>n&&!this._isPlaying)return!1;if(this.isPlaying||this.start(e),e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var o=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[t]||(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo&&this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var r=0,a=this._chainedTweens.length;r<a;r++)this._chainedTweens[r].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,i,n){for(var o in i)if(void 0!==t[o]){var r=t[o]||0,a=i[o],s=Array.isArray(e[o]),l=Array.isArray(a),h=!s&&l;h?e[o]=this._interpolationFunction(a,n):"object"===typeof a&&a?this._updateProperties(e[o],r,a,n):(a=this._handleRelativeValue(r,a),"number"===typeof a&&(e[o]=r+(a-r)*n))}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e];"string"===typeof this._valuesEnd[e]?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e]):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},e}(),l="18.6.0",h=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.version=l,t.now=i,t.Group=n,t.Easing=o,t.Interpolation=r,t.nextId=a.nextId,t.Tween=s,t}return h(t,e),t}(n),u=new d}).call(this,i("f28c"))},"36bd":function(e,t,i){"use strict";var n=i("4bf8"),o=i("77f1"),r=i("9def");e.exports=function(e){var t=n(this),i=r(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,i),l=a>2?arguments[2]:void 0,h=void 0===l?i:o(l,i);while(h>s)t[s++]=e;return t}},"5dbc":function(e,t,i){var n=i("d3f4"),o=i("8b97").set;e.exports=function(e,t,i){var r,a=t.constructor;return a!==i&&"function"==typeof a&&(r=a.prototype)!==i.prototype&&n(r)&&o&&o(e,r),e}},"6c7b":function(e,t,i){var n=i("5ca1");n(n.P,"Array",{fill:i("36bd")}),i("9c6c")("fill")},"8b97":function(e,t,i){var n=i("d3f4"),o=i("cb7c"),r=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,i){return r(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:r}},9093:function(e,t,i){var n=i("ce10"),o=i("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},aa77:function(e,t,i){var n=i("5ca1"),o=i("be13"),r=i("79e5"),a=i("fdef"),s="["+a+"]",l="​",h=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(e,t,i){var o={},s=r((function(){return!!a[e]()||l[e]()!=l})),h=o[e]=s?t(c):a[e];i&&(o[i]=h),n(n.P+n.F*s,"String",o)},c=u.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(h,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},c5f6:function(e,t,i){"use strict";var n=i("7726"),o=i("69a8"),r=i("2d95"),a=i("5dbc"),s=i("6a99"),l=i("79e5"),h=i("9093").f,d=i("11e9").f,u=i("86cc").f,c=i("aa77").trim,p="Number",m=n[p],f=m,y=m.prototype,g=r(i("2aeb")(y))==p,b="trim"in String.prototype,k=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():c(t,3);var i,n,o,r=t.charCodeAt(0);if(43===r||45===r){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+t}for(var a,l=t.slice(2),h=0,d=l.length;h<d;h++)if(a=l.charCodeAt(h),a<48||a>o)return NaN;return parseInt(l,n)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof m&&(g?l((function(){y.valueOf.call(i)})):r(i)!=p)?a(new f(k(t)),i,m):k(t)};for(var v,w=i("9e1e")?h(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)o(f,v=w[x])&&!o(m,v)&&u(m,v,d(f,v));m.prototype=y,y.constructor=m,i("2aba")(n,p,m)}},ce76:function(e,t,i){"use strict";i.r(t);for(var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"three-content",attrs:{id:"three-dom"}},[i("el-button",{staticStyle:{position:"absolute",top:"20px",right:"20px"},attrs:{type:"primary"},on:{click:e.set}},[e._v("模拟告警设置")]),i("el-dialog",{attrs:{top:"0vh",center:!0,title:"告警设置",visible:e.dialogVisible,width:"1450px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("h3",[e._v("触发告警设置")]),i("div",[i("el-checkbox-group",{model:{value:e.equipmentList,callback:function(t){e.equipmentList=t},expression:"equipmentList"}},[e._l(e.equipment,(function(t,n){return[i("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))]),i("el-select",{staticStyle:{width:"75px","margin-right":"10px","margin-bottom":"3px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.alarm[n],callback:function(t){e.$set(e.alarm,n,t)},expression:"alarm[i]"}},e._l(e.alarmInfo,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})))]}))],2)],1),i("h3",[e._v("解除告警设置")]),i("div",[i("el-checkbox-group",{model:{value:e.equipmentList1,callback:function(t){e.equipmentList1=t},expression:"equipmentList1"}},[e._l(e.equipment,(function(t,n){return[i("el-checkbox",{key:t.id,staticStyle:{"margin-bottom":"5px"},attrs:{label:t.id}},[e._v(e._s(t.name))])]}))],2)],1)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sure}},[e._v("确 定")])],1)])],1)},o=[],r=(i("c5f6"),i("14b9"),i("6c7b"),i("6b54"),i("7f7f"),i("ac6a"),i("d4ec")),a=i("bee2"),s=i("5a89"),l=(i("2176"),i("34ad")),h=i("9e5c"),d=i("e642"),u=i("5a15"),c=i("0dc0"),p=i("4086"),m=i("8710"),f=(i("22b5"),i("4721")),y=function(){function e(t,i){Object(r["a"])(this,e),this.props=t,this.ThreeData=i,this.dataJson=i,this.objList=i.objects||[],this.eventList=i.events||{},this.btnList=i.btns||[],this.alarmColor=Object.assign({level1:"#00c5ff",level2:"#b0f604",level3:"#fcff00",level4:"#ff8d00",level5:"#ff0000"},i.alarmColor),this.renderer=null,this.scene=null,this.camera=null,this.objects=[],this.equipment=[],this.sprite=[],this.cabinet=[],this.dom=document.getElementById(this.props.domID),this.dbclick=0,this.mouseClick=new s["Vector2"],this.raycaster=new s["Raycaster"],this.lastElement=null,this.tipTimer=null,this.tooltip=null,this.lastEvent=null,this.tooltipBG="#ACDEFE",this.commonFunc={_this:this,hasObj:function(e){return null!=e&&"undefined"!=typeof e},findObject:function(e){var t=null;return this.objects.forEach((function(i,n){if(null!=i.name&&""!=i.name&&i.name==e)return t=i,t})),t},getPath:function(e){return this._this.BASE_PATH+e},guid:function(){return this.guidRandom()+this.guidRandom()+"-"+this.guidRandom()+"-"+this.guidRandom()+"-"+this.guidRandom()+"-"+this.guidRandom()+this.guidRandom()+this.guidRandom()},guidRandom:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)}},this.progressSuccess=0,this.loadtimer=null,this.BASE_PATH=this.props.BASE_PATH||"./images/"}return Object(a["a"])(e,[{key:"init",value:function(){this.initRenderer(),this.initScene(),this.initCamera(),this.initLight(),this.render(),this.setControl(),this.InitData(),this.renderer.domElement.addEventListener("mousedown",this.onDocumentMouseDown.bind(this),!1),this.renderer.domElement.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1)}},{key:"initRenderer",value:function(){this.renderer=new s["WebGLRenderer"]({antialias:!0}),this.renderer.setSize(this.dom.offsetWidth,this.dom.offsetHeight),this.dom.appendChild(this.renderer.domElement)}},{key:"initCamera",value:function(){this.camera=new s["PerspectiveCamera"](45,this.dom.offsetWidth/this.dom.offsetHeight,1,1e5),this.camera.name="mainCamera",this.camera.position.set(0,1e3,1800),this.camera.lookAt({x:0,y:0,z:0}),this.scene.add(this.camera)}},{key:"initScene",value:function(){this.scene=new s["Scene"],this.scene.background=new s["Color"](2252691)}},{key:"initLight",value:function(){var e=new s["AmbientLight"](13421772);e.position.set(0,0,0),this.scene.add(e);var t=new s["PointLight"](5592405);t.shadow.camera.near=1,t.shadow.camera.far=5e3,t.position.set(0,900,1600),t.castShadow=!0,this.scene.add(t)}},{key:"render",value:function(){this.animate()}},{key:"animate",value:function(){requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera)}},{key:"setHelper",value:function(){var e=new s["AxisHelper"](5);this.scene.add(e)}},{key:"setControl",value:function(){this.controls=new f["a"](this.camera,this.dom),this.controls.update()}},{key:"InitData",value:function(){if(this.objList.length>0)for(var e=0;e<this.objList.length;e++)this.InitAddObject(this.objList[e]);this.createText(this.objList[0].width,this.objList[0].depth),this.InitTooltip()}},{key:"resetView",value:function(){this.dom.removeChild(this.renderer.domElement);var t=new e(this.props,this.ThreeData);t.init()}},{key:"Loading",value:function(){var e=document.createElement("div");e.setAttribute("id","loading"),e.style.display="block",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="100%",e.style.height="100%",e.style.fontSize="30px",e.style.zIndex="999",e.style.background="rgba(0,0,0,0.65)";var t=document.createElement("div");t.innerHTML="模型加载中...",t.style.top="40%",t.style.position="absolute",t.style.width="100%",t.style.textAlign="center",e.appendChild(t),this.dom.appendChild(e)}},{key:"LoadSuccess",value:function(){var e=this;if(3==this.progressSuccess){var t=this.dom.querySelector("#loading");t.style.display="none",clearTimeout(this.loadtimer)}else this.loadtimer=setTimeout((function(){e.LoadSuccess()}),1e3)}},{key:"InitTooltip",value:function(){this.tooltip=document.createElement("div"),this.tooltip.setAttribute("id","tooltip"),this.tooltip.style.display="none",this.tooltip.style.position="absolute",this.tooltip.style.color="#000",this.tooltip.style.maxWidth="200px",this.tooltip.style.width="32px",this.tooltip.style.height="auto",this.tooltip.style.lineHeight="22px",this.tooltip.style.textAlign="center",this.tooltip.style.padding="10px",this.tooltip.style.background=this.tooltipBG,this.tooltip.style.opacity=.8,this.tooltip.style["border-radius"]="5px";var e=document.createElement("div");e.setAttribute("id","tipdiv");var t=document.createElement("span");t.style.marginLeft="50%",t.style.bottom="-10px",t.style.left="-10px",t.style.position="absolute",t.style.borderTop="10px solid "+this.tooltipBG,t.style.borderLeft="10px solid transparent",t.style.borderRight="10px solid transparent",this.tooltip.appendChild(t),this.tooltip.appendChild(e),this.dom.appendChild(this.tooltip)}},{key:"InitBtn",value:function(){var e=this,t=this.btnList.length,i=24,n=document.createElement("div");n.setAttribute("id","toolbar"),n.style.display="block",n.style.position="absolute",n.style.left="10px",n.style.top="75px",n.style.width="32px",n.style.height=t*i+i+"px",n.style.background="rgba(255,255,255,0.75)",n.style["border-radius"]="5px",this.dom.appendChild(n);for(var o=0;o<t;o++){var r=this.btnList[o],a=r.btnimg,s=document.createElement("img");s.style.position="absolute",s.style.left="4px",s.style.top=i/2+o*i+"px",s.style["pointer-events"]="auto",s.style["cursor"]="pointer",s.setAttribute("src",this.commonFunc.getPath(a)),s.style.width="24px",s.style.height="24px",s.setAttribute("title",r.btnTitle),s.onclick=function(){r.clickFunction(e)},n.appendChild(s)}}},{key:"InitAddObject",value:function(e){if(null==e.show||"undefined"==typeof e.show||e.show){var t=null;switch(e.objType){case"cube":t=this.createCube(e),this.addObject(t,"scene");break;case"wall":this.CreateWall(e);break;case"emptyCabinet":t=this.createEmptyCabinet(e),this.addObject(t,"scene");break;case"objPlant":this.createObjPlant(e);break;case"objAnnihilator":this.createObjAnnihilator(e);break;case"objCamera":this.createObjCamera(e);break}}}},{key:"CreateWall",value:function(e){var t=this,i=e.depth||40,n=e.height||100,o=e.width||300,r=e.style.skinColor||9991439,a=e.style.transparent||!1,s=e.style.opacity||1;e.wallData.forEach((function(e,l){var h=o,d=e.depth||i,u=((e.startDot.x||0)+(e.endDot.x||0))/2,c=((e.startDot.y||0)+(e.endDot.y||0))/2,p=((e.startDot.z||0)+(e.endDot.z||0))/2;e.startDot.z==e.endDot.z?(h=Math.abs(e.startDot.x-e.endDot.x),d=e.depth||i):e.startDot.x==e.endDot.x&&(h=e.depth||i,d=Math.abs(e.startDot.z-e.endDot.z));var m={width:h,height:e.height||n,depth:d,rotation:e.rotation,x:u,y:c,z:p,uuid:e.uuid,name:e.name,style:{skinColor:r,skin:e.skin,transparent:a,opacity:s}},f=t.createCube(m);t.commonFunc.hasObj(e.childrens)&&e.childrens.length>0&&e.childrens.forEach((function(e,i){var n=t.CreateHole(e);f=t.mergeModel(e.op,f,n,r)})),t.addObject(f,"scene")}))}},{key:"mergeModel",value:function(e,t,i,n){var o=new ThreeBSP(t),r=new ThreeBSP(i),a=null;if("-"==e)a=o.subtract(r);else{if("+"==e){new s["Mesh"](i);return i.updateMatrix(),t.geometry.merge(i.geometry,i.matrix),t}if("&"!=e)return this.addObject(i,"scene"),t;a=o.intersect(r)}var l=a.toMesh();l.material.flatShading=s["FlatShading"],l.geometry.computeFaceNormals(),l.geometry.computeVertexNormals(),l.uuid=t.uuid+e+i.uuid,l.name=t.name+e+i.name,l.material.needsUpdate=!0,l.geometry.buffersNeedUpdate=!0,l.geometry.uvsNeedUpdate=!0,l.material=t.material;for(var h=0;h<l.geometry.faces.length/2;h++){for(var d=!1,u=0;u<t.geometry.faces;u++)l.geometry.faces[h].vertexNormals[0].x===t.geometry.faces[u].vertexNormals[0].x&&l.geometry.faces[h].vertexNormals[0].y===t.geometry.faces[u].vertexNormals[0].y&&l.geometry.faces[h].vertexNormals[0].z===t.geometry.faces[u].vertexNormals[0].z&&l.geometry.faces[h].vertexNormals[1].x===t.geometry.faces[u].vertexNormals[1].x&&l.geometry.faces[h].vertexNormals[1].y===t.geometry.faces[u].vertexNormals[1].y&&l.geometry.faces[h].vertexNormals[1].z===t.geometry.faces[u].vertexNormals[1].z&&l.geometry.faces[h].vertexNormals[2].x===t.geometry.faces[u].vertexNormals[2].x&&l.geometry.faces[h].vertexNormals[2].y===t.geometry.faces[u].vertexNormals[2].y&&l.geometry.faces[h].vertexNormals[2].z===t.geometry.faces[u].vertexNormals[2].z&&(l.geometry.faces[2*h].color.setHex(n),l.geometry.faces[2*h].materialIndex=t.geometry.faces[u].materialIndex,l.geometry.faces[2*h+1].color.setHex(n),l.geometry.faces[2*h+1].materialIndex=t.geometry.faces[u].materialIndex);if(0==d){for(u=0;u<i.geometry.faces.length;u++)l.geometry.faces[h].vertexNormals[0].x===i.geometry.faces[u].vertexNormals[0].x&&l.geometry.faces[h].vertexNormals[0].y===i.geometry.faces[u].vertexNormals[0].y&&l.geometry.faces[h].vertexNormals[0].z===i.geometry.faces[u].vertexNormals[0].z&&l.geometry.faces[h].vertexNormals[1].x===i.geometry.faces[u].vertexNormals[1].x&&l.geometry.faces[h].vertexNormals[1].y===i.geometry.faces[u].vertexNormals[1].y&&l.geometry.faces[h].vertexNormals[1].z===i.geometry.faces[u].vertexNormals[1].z&&l.geometry.faces[h].vertexNormals[2].x===i.geometry.faces[u].vertexNormals[2].x&&l.geometry.faces[h].vertexNormals[2].y===i.geometry.faces[u].vertexNormals[2].y&&l.geometry.faces[h].vertexNormals[2].z===i.geometry.faces[u].vertexNormals[2].z&&(l.geometry.faces[2*h].color.setHex(n),l.geometry.faces[2*h].materialIndex=i.geometry.faces[u].materialIndex,l.geometry.faces[2*h+1].color.setHex(n),l.geometry.faces[2*h+1].materialIndex=i.geometry.faces[u].materialIndex);l.geometry.faces[2*h].color.setHex(n),l.geometry.faces[2*h+1].color.setHex(n)}}return l.castShadow=!0,l.receiveShadow=!0,l}},{key:"CreateHole",value:function(e){var t=40,i=100,n=300,o=9991439,r=n,a=e.depth||t,s=((e.startDot.x||0)+(e.endDot.x||0))/2,l=((e.startDot.y||0)+(e.endDot.y||0))/2,h=((e.startDot.z||0)+(e.endDot.z||0))/2;e.startDot.z==e.endDot.z?(r=Math.abs(e.startDot.x-e.endDot.x),a=e.depth||t):e.startDot.x==e.endDot.x&&(r=e.depth||t,a=Math.abs(e.startDot.z-e.endDot.z));var d={width:r,height:e.height||i,depth:a,rotation:e.rotation,uuid:e.uuid,name:e.name,objType:e.objType,x:s,y:l,z:h,style:{skinColor:e.skinColor||o,skin:e.skin}},u=this.createCube(d);return u}},{key:"createCube",value:function(e){for(var t=e.width||1e3,i=e.height||10,n=e.depth||t,o=e.x||0,r=e.y||0,a=e.z||0,l=e.style.hasOwnProperty("skinColor")?e.style.skinColor:"",h=new s["CubeGeometry"](t,i,n,0,0,1),d=0;d<h.faces.length;d+=2)h.faces[d].color.setHex(l),h.faces[d+1].color.setHex(l);var u={vertexColors:s["FaceColors"]},c=u,p=u,m=u,f=u,y=u;if(null!=e.style&&"undefined"!=typeof e.style&&null!=e.style.skin&&"undefined"!=typeof e.style.skin){null!=e.style.skin.opacity&&"undefined"!=typeof e.style.skin.opacity&&e.style.skin.opacity;var g=e.style.skin.hasOwnProperty("skin_right")&&e.style.skin.skin_right.hasOwnProperty("skinColor")?e.style.skin.skin_right.skinColor:e.style.skin.hasOwnProperty("skinColor")?e.style.skin.skinColor:"",b=e.style.skin.hasOwnProperty("skin_left")&&e.style.skin.skin_left.hasOwnProperty("skinColor")?e.style.skin.skin_left.skinColor:e.style.skin.hasOwnProperty("skinColor")?e.style.skin.skinColor:"",k=e.style.skin.hasOwnProperty("skin_up")&&e.style.skin.skin_up.hasOwnProperty("skinColor")?e.style.skin.skin_up.skinColor:e.style.skin.hasOwnProperty("skinColor")?e.style.skin.skinColor:"",v=e.style.skin.hasOwnProperty("skin_down")&&e.style.skin.skin_down.hasOwnProperty("skinColor")?e.style.skin.skin_down.skinColor:e.style.skin.hasOwnProperty("skinColor")?e.style.skin.skinColor:"",w=e.style.skin.hasOwnProperty("skin_fore")&&e.style.skin.skin_fore.hasOwnProperty("skinColor")?e.style.skin.skin_fore.skinColor:e.style.skin.hasOwnProperty("skinColor")?e.style.skin.skinColor:"",x=e.style.skin.hasOwnProperty("skin_behind")&&e.style.skin.skin_behind.hasOwnProperty("skinColor")?e.style.skin.skin_behind.skinColor:e.style.skin.hasOwnProperty("skinColor")?e.style.skin.skinColor:"";y=this.createSkinOption(n,i,e.style.skin.skin_right,h,g,0),f=this.createSkinOption(n,i,e.style.skin.skin_left,h,b,2),u=this.createSkinOption(t,n,e.style.skin.skin_up,h,k,4),c=this.createSkinOption(t,n,e.style.skin.skin_down,h,v,6),p=this.createSkinOption(t,i,e.style.skin.skin_fore,h,w,8),m=this.createSkinOption(t,i,e.style.skin.skin_behind,h,x,10)}var A=[];A.push(new s["MeshLambertMaterial"](y)),A.push(new s["MeshLambertMaterial"](f)),A.push(new s["MeshLambertMaterial"](u)),A.push(new s["MeshLambertMaterial"](c)),A.push(new s["MeshLambertMaterial"](p)),A.push(new s["MeshLambertMaterial"](m));var j=new s["Mesh"](h,A);return j.castShadow=!0,j.receiveShadow=!0,j.uuid=e.uuid,j.name=e.name,j.position.set(o,r,a),null!=e.rotation&&"undefined"!=typeof e.rotation&&e.rotation.length>0&&e.rotation.forEach((function(e,t){switch(e.direction){case"x":j.rotateX(e.degree);break;case"y":j.rotateY(e.degree);break;case"z":j.rotateZ(e.degree);break;case"arb":j.rotateOnAxis(new s["Vector3"](e.degree[0],e.degree[1],e.degree[2]),e.degree[3]);break}})),j}},{key:"createEmptyCabinet",value:function(e){var t,i=10,n=this,o=e.uuid||this.commonFunc.guid(),r={show:!0,name:"cubedown",uuid:"",objType:"cube",width:e.size.width,height:e.size.thick,depth:e.size.depth,x:0,y:-e.size.height/2+e.size.thick/2,z:0,style:{skinColor:e.style.skinColor,skin:e.style.skin}},a=this.createCube(r),l={show:!0,uuid:"",name:"cubetop",objType:"cube",width:e.size.width,height:e.size.thick,depth:e.size.depth,x:0,y:e.size.height-e.size.thick,z:0,style:{skinColor:e.style.skinColor,skin:e.style.skin}},h=this.createCube(l);t=this.mergeModel("+",a,h);var d={show:!0,uuid:"",name:"cubeleft",objType:"cube",width:e.size.thick,height:e.size.height-2*e.size.thick,depth:e.size.depth,x:-e.size.width/2+e.size.thick/2,y:e.size.height/2-e.size.thick/2,z:0,style:{skinColor:e.style.skinColor,skin:e.style.skin}},u=this.createCube(d);t=this.mergeModel("+",t,u);var c={show:!0,uuid:"",name:"cuberight",objType:"cube",width:e.size.thick,height:e.size.height-2*e.size.thick,depth:e.size.depth,x:e.size.width/2-e.size.thick/2,y:e.size.height/2-e.size.thick/2,z:0,style:{skinColor:e.style.skinColor,skin:e.style.skin}},p=this.createCube(c);t=this.mergeModel("+",t,p);var m={show:!0,uuid:"",name:"",objType:"cube",width:e.size.width,height:e.size.height-2*e.size.thick,depth:e.size.thick,x:0,y:e.size.height/2-e.size.thick/2,z:-e.size.depth/2+e.size.thick/2,style:{skinColor:e.style.skinColor,skin:e.style.skin}},f=this.createCube(m);t=this.mergeModel("+",t,f),this.addObject(t,"object");var y=new s["Object3D"];if(y.add(t),y.name=e.name,y.uuid=o,y.data=e.data||{name:e.name,alarmInfo:[]},y.position.set(e.x||0,(e.y||0)+i,e.z||0),this.addObject(y,"object"),this.cabinet.push(y),null!=e.doors&&"undefined"!=typeof e.doors)if(1==e.doors.skins.length&&1==e.doors.doorname.length){var g={show:!0,uuid:"",name:e.doors.doorname[0],objType:"cube",depth:e.size.thick,width:e.size.width,height:e.size.height-2*e.size.thick,x:0,y:0,z:e.size.depth/2-e.size.thick/2+1,rotation:e.doors.rotation||null,style:{skinColor:e.doors.skins[0].skinColor,skin:e.doors.skins[0]}},b=this.createCube(g);e.doors.rotation&&b.position.set(e.size.width/2,0,e.size.depth/2-e.size.thick/2+1+e.size.width/2),y.add(b),this.addObject(b,"object")}else if(2==e.doors.skins.length&&2==e.doors.doorname.length)for(var k=0;k<e.doors.skins.length;k++){var v=0===k?-e.size.width/4:e.size.width/4;g={show:!0,uuid:"",name:e.doors.doorname[k],objType:"cube",depth:e.size.thick,width:e.size.width/2,height:e.size.height,x:v,y:0,z:e.size.depth/2-e.size.thick/2+1,style:{skinColor:e.doors.skins[k].skinColor,skin:e.doors.skins[k]}},b=this.createCube(g);y.add(b),this.addObject(b,"object")}if(this.commonFunc.hasObj(e.data)){var w=e.size.width||70,x=e.size.height||70,A=document.createElement("canvas");A["width"]=w,A["height"]=x;var j=A.getContext("2d");j.beginPath(),j.rect(0,0,w,x),j.fillStyle="rgba(255, 255, 255, 0)",j.fill();var C=function(e,t,i,n){var o="#ffffff";e.font='12px "Microsoft Yahei" ',e.fillStyle=o,e.textAlign="center",e.textBaseline="middle",e.strokeStyle=o,e.fillText(n,t,i)};C(j,w/2,x/2,e.data.name);var z={width:w,height:x,imgurl:A,y:e.size.height/2+1,transparent:!0,opacity:.8,rotation:[{direction:"x",degree:-.5*Math.PI}]},_=this.createPlaneGeometry(z);y.add(_);var O="data:image/png;base64,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",T=(new s["TextureLoader"]).load(O),I=new s["SpriteMaterial"]({color:this.alarmColor.level1,map:T}),M=new s["Sprite"](I);M.position.set(e.x,e.y+e.size.height/2+22,e.z),M.scale.set(25,25,1),M.data={cabinetUUID:o,level:"1",alarmInfo:[]},M.name="spriteAlarm",M.visible=!1,this.addObject(M),this.sprite.push(M)}if(this.commonFunc.hasObj(e.childrens)&&e.childrens.length>0){var S=[];e.childrens.forEach((function(t,r){var a=t.uuid||n.commonFunc.guid();t.x=e.x,t.z=e.z,t.y=t.y+i+(e.y-(e.size.height-2*e.size.thick)/2),t.rotation=e.rotation||null;var s=n.createCube(t);s.data=t.data,s.data["cabinetUUID"]=o,s.uuid=a,S.push(a),n.addObject(s),n.equipment.push(s)})),y.data["equipmentUUID"]=S}return null!=e.rotation&&"undefined"!=typeof e.rotation&&e.rotation.length>0&&e.rotation.forEach((function(e,t){switch(e.direction){case"x":y.rotateX(e.degree);break;case"y":y.rotateY(e.degree);break;case"z":y.rotateZ(e.degree);break;case"arb":y.rotateOnAxis(new s["Vector3"](e.degree[0],e.degree[1],e.degree[2]),e.degree[3]);break}})),y}},{key:"createCylinderPlant",value:function(e){var t=this,i=e.radiusTop||20,n=e.radiusBottom||20,o=e.height||100,r=e.radiusSegments||8,a=e.heightSegments||1,l=e.openEnded||!1,h=e.x||0,d=e.y||0,u=e.z||0,c=e.style.skinColor||9991439,p=new s["CylinderGeometry"](i,n,o,r,a,l);console.log(p);var m=new s["MeshLambertMaterial"]({color:c,wireframe:!1}),f=new s["Mesh"](p,m);return f.position.set(h,d,u),this.commonFunc.hasObj(e.childrens)&&e.childrens.length>0&&e.childrens.forEach((function(e,i){var n;n="plane"==e.objType?t.createPlaneGeometry(e):t.createCylinderPlant(e),t.addObject(n,"scene")})),f}},{key:"createPlaneGeometry",value:function(e){var t,i=e.transparent;if(!1!==e.transparent&&(i=!0),"string"==typeof e.imgurl){var n=new s["TextureLoader"],o=e.imgurl;-1==e.imgurl.indexOf("data:image/")&&(o=this.commonFunc.getPath(e.imgurl)),t=n.load(o,(function(){}),void 0,(function(){}))}else t=new s["CanvasTexture"](e.imgurl);var r={map:t,side:e.side||s["DoubleSide"],transparent:i,opacity:e.opacity||1};e.blending&&(r.blending=s["AdditiveBlending"]);var a=new s["Mesh"](new s["PlaneGeometry"](e.width,e.height,1,1),new s["MeshBasicMaterial"](r));return a.position.x=e.x||0,a.position.y=e.y||0,a.position.z=e.z||0,null!=e.rotation&&"undefined"!=typeof e.rotation&&e.rotation.length>0&&e.rotation.forEach((function(e,t){switch(e.direction){case"x":a.rotateX(e.degree);break;case"y":a.rotateY(e.degree);break;case"z":a.rotateZ(e.degree);break;case"arb":a.rotateOnAxis(new s["Vector3"](e.degree[0],e.degree[1],e.degree[2]),e.degree[3]);break}})),a}},{key:"createObjPlant",value:function(e){var t=this,i=new p["a"];i.load(t.commonFunc.getPath("plant/plant.mtl"),(function(i){i.preload();var n=new d["a"];n.setMaterials(i),n.load(t.commonFunc.getPath("plant/plant.obj"),(function(i){e.childrens.forEach((function(n){var o=i.clone();o.objHandle||(n.objHandle?o.objHandle=n.objHandle:e.objHandle&&(o.objHandle=e.objHandle)),o=t.handleObj(o),o.position.set(n.x||0,n.y||0,n.z||0),t.scene.add(o)})),t.progressSuccess+=1}),t.onProgress,t.onError)}))}},{key:"createObjAnnihilator",value:function(e){var t=this,i=new p["a"];i.load(t.commonFunc.getPath("annihilator/annihilator.mtl"),(function(i){i.preload();var n=new d["a"];n.setMaterials(i),n.load(t.commonFunc.getPath("annihilator/annihilator.obj"),(function(i){e.childrens.forEach((function(n){var o=i.clone();o.objHandle||(n.objHandle?o.objHandle=n.objHandle:e.objHandle&&(o.objHandle=e.objHandle)),o=t.handleObj(o),o.position.set(n.x||0,n.y||0,n.z||0),t.scene.add(o)})),t.progressSuccess+=1}),t.onProgress,t.onError)}))}},{key:"createObjCamera",value:function(e){var t=this,i=new p["a"];i.load(t.commonFunc.getPath("camera/camera.mtl"),(function(i){i.preload();var n=new d["a"];n.setMaterials(i),n.load(t.commonFunc.getPath("camera/camera.obj"),(function(i){e.childrens.forEach((function(n){var o=i.clone();o.objHandle||(n.objHandle?o.objHandle=n.objHandle:e.objHandle&&(o.objHandle=e.objHandle)),o=t.handleObj(o),o.position.set(n.x||0,n.y||0,n.z||0),t.scene.add(o)})),t.progressSuccess+=1}),t.onProgress,t.onError)}))}},{key:"handleObj",value:function(e){return null!=e.objHandle&&"undefined"!=typeof e.objHandle&&e.objHandle.length>0&&e.objHandle.forEach((function(t){switch(t.direction){case"x":t.ratio&&(e.scale.x=t.ratio),t.degree&&e.rotateX(t.degree);break;case"y":t.ratio&&(e.scale.y=t.ratio),t.degree&&e.rotateY(t.degree);break;case"z":t.ratio&&(e.scale.z=t.ratio),t.degree&&e.rotateZ(t.degree);break;case"arb":t.handleScale&&3==t.handleScale.length&&e.scale.set(t.handleScale[0],t.handleScale[1],t.handleScale[2]),t.handleRotale&&4==t.handleRotale.length&&e.rotateOnAxis(new s["Vector3"](t.handleRotale[0],t.handleRotale[1],t.handleRotale[2]),t.handleRotale[3]);break}})),e}},{key:"onProgress",value:function(e){if(e.lengthComputable)e.loaded,e.total}},{key:"onError",value:function(e){}},{key:"changePivot",value:function(e,t,i,n){var o=new s["Object3D"];return o.position.set(e.position.x+t,e.position.y+i,e.position.z+n),e.position.set(-t,-i,-n),o.add(e),o}},{key:"addObject",value:function(e,t){t?("object"==t&&this.objects.push(e),"scene"==t&&this.scene.add(e)):(this.objects.push(e),this.scene.add(e))}},{key:"createSkinOption",value:function(e,t,i,n,o,r){if(this.commonFunc.hasObj(i)){if(this.commonFunc.hasObj(i.imgurl)){var a={color:o,map:this.createSkin(e,t,i),opacity:i.opacity||1};return i.transparent&&(a.transparent=i.transparent),i.blending&&(a.blending=s["AdditiveBlending"]),a}return this.commonFunc.hasObj(i.skinColor)&&(n.faces[r].color.setHex(i.skinColor),n.faces[r+1].color.setHex(i.skinColor)),{vertexColors:s["FaceColors"]}}return{vertexColors:s["FaceColors"]}}},{key:"createSkin",value:function(e,t,i){var n=128,o=128;null!=i.width&&"undefined"!=typeof i.width&&(n=i.width),null!=i.height&&"undefined"!=typeof i.height&&(o=i.height);var r=(new s["TextureLoader"]).load(this.commonFunc.getPath(i.imgurl)),a=!1;return null!=i.repeatx&&"undefined"!=typeof i.repeatx&&1==i.repeatx&&(r.wrapS=s["RepeatWrapping"],a=!0),null!=i.repeaty&&"undefined"!=typeof i.repeaty&&1==i.repeaty&&(r.wrapT=s["RepeatWrapping"],a=!0),a&&r.repeat.set(e/n,t/o),r}},{key:"createText",value:function(e,t){var i=document.createElement("canvas");i["width"]=1024,i["height"]=1024;var n=i.getContext("2d");n.beginPath(),n.rect(0,0,1024,1024),n.fillStyle="rgba(255, 255, 255, 0)",n.fill();var o=function(e,t,i,n,o){var r="#0B2F3A";e.font='30px "Microsoft Yahei" ',e.fillStyle=r,e.textAlign="center",e.textBaseline="middle",e.strokeStyle=r,e.lineWidth=3,e.strokeText(t,n,o),i&&(o+=30,r="#FE642E",e.font='16px "Microsoft Yahei" ',e.fillStyle=r,e.textAlign="center",e.textBaseline="middle",e.fillText(i,n,o))};o(n,"阿里巴巴","ip待分配",500,380),o(n,"腾讯","192.168.1.150",500,495),o(n,"依米康·龙控","192.168.1.100",500,610);var r={width:t,height:e,imgurl:i,y:6,transparent:!0,opacity:.8,rotation:[{direction:"x",degree:-.5*Math.PI},{direction:"z",degree:.5*Math.PI}]},a=this.createPlaneGeometry(r);this.scene.add(a)}},{key:"updateAlarmStatus",value:function(e){for(var t=0;t<this.equipment.length;t++)for(var i=0;i<e.length;i++)if(e[i].devid==this.equipment[t].data.devid&&e[i].pointid==this.equipment[t].data.pointid)for(var n=0;n<this.sprite.length;n++)this.sprite[n].data.cabinetUUID==this.equipment[t].data.cabinetUUID&&this.changeCabinetAlarmObj(e[i],n,t)}},{key:"changeCabinetAlarmObj",value:function(e,t,i){var n=this.sprite[t].data.alarmInfo;if(console.log(e),e.isalarm){Number(this.sprite[t].data.level)<Number(e.level)&&(this.sprite[t].data.level=e.level,this.sprite[t].material.color.set(this.alarmColor["level"+e.level]));for(var o=!0,r=0;r<n.length;r++)n[r].devid==e.devid&&n[r].pointid==e.pointid&&(n.splice(r,1,e),o=!1);if(o&&n.push(e),this.equipment[i].material.length>0)for(var a=0;a<this.equipment[i].material.length;a++)this.equipment[i].material[a].color.set(this.alarmColor["level"+e.level]);this.equipment[i].data.isalarm=!0,this.sprite[t].visible=e.isalarm;var s=e.name+e.alarmInfo;this.alarmPlay(s)}else{if(n.length>0){for(var l=0;l<n.length;l++)n[l].devid==e.devid&&n[l].pointid==e.pointid&&n.splice(l,1);if(n.length>0){for(var h=[],d=0;d<n.length;d++)h.push(n[d].level);var u=Math.max.apply(Math,h);this.sprite[t].data.level=u,this.sprite[t].material.color.set(this.alarmColor["level"+u])}else this.sprite[t].data.level="1",this.sprite[t].visible=!1}if(this.equipment[i].material.length>0)for(var c=0;c<this.equipment[i].material.length;c++)this.equipment[i].material[c].color.set("#ffffff")}}},{key:"alarmPlay",value:function(e){var t=new window.SpeechSynthesisUtterance;t.text=e,t.lang="zh-CN",t.pitch=2,t.rate=1,t.volume=1,window.speechSynthesis.speak(t)}},{key:"onDocumentMouseDown",value:function(e){this.dbclick++;var t=this;if(setTimeout((function(){t.dbclick=0}),500),e.preventDefault(),this.dbclick>=2){this.mouseClick.x=e.offsetX/this.dom.offsetWidth*2-1,this.mouseClick.y=-e.offsetY/this.dom.offsetHeight*2+1,this.raycaster.setFromCamera(this.mouseClick,this.camera);var i=this.raycaster.intersectObjects(this.objects);if(i.length>0){this.controls.enabled=!1;var n=i[0].object;console.log(n),null!=this.eventList&&null!=this.eventList.dbclick&&this.eventList.dbclick.length>0&&this.eventList.dbclick.forEach((function(e,i){"string"==typeof e.obj_name?e.obj_name==n.name&&e.obj_event(n,t):null==e.findObject&&"function"!=typeof e.findObject||e.findObject(n.name)&&e.obj_event(n,t)})),this.controls.enabled=!0}}}},{key:"openCloseDoor",value:function(e,t,i,n,o){console.log(e);var r="close",a=null;if(null!=e.doorState&&"undefined"!=typeof e.doorState)r=e.doorState,a=e.parent;else{console.log("add parent");var l=e.parent;a=new s["Object3D"],a.position.set(e.position.x+t,e.position.y+i,e.position.z+n),e.position.set(-t,-i,-n),a.add(e),l.add(a)}if(e.doorState="close"==r?"open":"close","left"==o||"right"==o){var h="left"==o?1:-1;"close"==e.doorState?a.rotateOnAxis(new s["Vector3"](0,1,0),.5*h*Math.PI):a.rotateOnAxis(new s["Vector3"](0,1,0),-.5*h*Math.PI)}else if("outin"==o){var d=new s["Vector3"](1,0,0);"close"==e.doorState?a.translateOnAxis(d,20-e.geometry.parameters.depth):a.translateOnAxis(d,e.geometry.parameters.depth-20)}}},{key:"openLeftDoor",value:function(e,t){this.openCloseDoor(e,-e.geometry.parameters.width/2,0,0,"left")}},{key:"openRightDoor",value:function(e,t){this.openCloseDoor(e,e.geometry.parameters.width/2,0,0,"right")}},{key:"openCabinetDoor",value:function(e,t){this.openCloseDoor(e,e.geometry.parameters.width/2,0,e.geometry.parameters.depth/2,"right")}},{key:"openEquipmentDoor",value:function(e,t){this.openCloseDoor(e,0,0,e.geometry.parameters.depth/2,"outin")}},{key:"onDocumentMouseMove",value:function(e){var t=this,i=null;this.mouseClick.x=e.offsetX/this.dom.offsetWidth*2-1,this.mouseClick.y=-e.offsetY/this.dom.offsetHeight*2+1,this.raycaster.setFromCamera(this.mouseClick,this.camera);var n=this.raycaster.intersectObjects(this.objects);if(n.length>0){var o=n[0].object;-1==o.name.toString().indexOf("equipment")&&-1==o.name.toString().indexOf("spriteAlarm")||(i=o)}this.lastElement!=i&&(clearTimeout(this.tipTimer),i&&(this.tipTimer=setTimeout((function(){console.log(i);var e="";if(-1!=i.name.toString().indexOf("equipment")&&(console.log(i),e=i.data.tipInfo,t.tooltip.style.background=t.tooltipBG,t.tooltip.querySelector("span").style.borderTop="10px solid "+t.tooltipBG),-1!=i.name.toString().indexOf("spriteAlarm")&&(console.log(i),i.data.alarmInfo.length>0)){for(var n=[],o=0;o<i.data.alarmInfo.length;o++)n.push(i.data.alarmInfo[o].level),e+=i.data.alarmInfo[o].name+i.data.alarmInfo[o].alarmInfo+"；";var r=Math.max.apply(Math,n);t.tooltip.style.background=t.alarmColor["level"+r],t.tooltip.querySelector("span").style.borderTop="10px solid "+t.alarmColor["level"+r]}var a=e.length;t.tooltip.querySelector("#tipdiv").innerHTML=e,t.tooltip.style.width=15*a+"px",t.tooltip.style.display="block",t.tooltip.style.left=t.lastEvent.pageX-t.tooltip.clientWidth/2+"px",t.tooltip.style.top=t.lastEvent.pageY-t.tooltip.clientHeight-15+"px"}),300))),this.lastElement=i,null==i&&t.tooltip&&(t.tooltip.style.display="none"),this.lastEvent=e}},{key:"add",value:function(){}},{key:"createObjContainMtl",value:function(){var e=(new s["TextureLoader"]).load("./images/plant/Archmodels66_leaf_33.jpg"),t=(new s["TextureLoader"]).load("./images/plant/Archmodels66_dirt_1.jpg"),i=(new s["TextureLoader"]).load("./images/plant/Archmodels66_bark_1.jpg"),n=(new s["TextureLoader"]).load("./images/plant/Archmodels66_jardiniere.jpg"),o=new d["a"];o.load("./images/plant/plant.obj",(function(o){o.traverse((function(o){o instanceof s["Mesh"]&&(o.material=new s["MeshBasicMaterial"]({color:16777215}),"3DXY_geometry_769"==o.name||"3DXY_geometry_773"==o.name?(o.material.name="wire_153228214",o.material.map=e):"3DXY_geometry_772"==o.name||"3DXY_geometry_776"==o.name||"3DXY_geometry_777"==o.name||"3DXY_geometry_778"==o.name?(o.material.name="wire_108008136",o.material.map=i):"3DXY_geometry_774"==o.name||"3DXY_geometry_775"==o.name?(o.material.name="wire_177148027",o.material.map=t):"3DXY_geometry_770"==o.name&&(o.material.name="wire_198225087",o.material.map=n))}));var r=new c["a"],a=r.parse(o),l=document.createElement("a");l.style.display="none",document.body.appendChild(l),l.href=URL.createObjectURL(new Blob([a],{type:"text/plain"})),l.download="object.obj",l.click()}),this.onProgress,this.onError)}},{key:"exportGLTF",value:function(){var e=new s["BoxGeometry"](40,5,40),t=new s["MeshPhongMaterial"]({color:255}),i=new s["Mesh"](e,t),n=new h["a"];n.parse(i,(function(e){console.log(e);var t=JSON.stringify(e,null,2),i=document.createElement("a");i.style.display="none",document.body.appendChild(i),i.href=URL.createObjectURL(new Blob([t],{type:"text/plain"})),i.download="object.gltf",i.click()}));var o=this,r=new l["a"];r.load("./images/test/object.gltf",(function(e){console.log("控制台查看加载gltf文件返回的对象结构",e),console.log("gltf对象场景属性",e.scene),console.log("gltf对象相机属性",e.cameras),o.scene.add(e.scene)}))}},{key:"exportOBJ",value:function(){var e=new s["BoxGeometry"](40,5,40),t=new s["MeshPhongMaterial"]({color:255}),i=new s["Mesh"](e,t),n=new c["a"],o=n.parse(i),r=document.createElement("a");r.style.display="none",document.body.appendChild(r),r.href=URL.createObjectURL(new Blob([o],{type:"text/plain"})),r.download="object.obj",r.click();var a=this,l=new d["a"];new u["a"];l.load("./images/test/object.obj",(function(e){console.log(e),a.scene.add(e)}))}},{key:"createFBX",value:function(e){var t=this,i=new m["a"];i.load(t.commonFunc.getPath("rack/2-5-E-max.fbx"),(function(e){console.log(e),t.scene.add(e)}))}}]),e}(),g={objects:[{show:!0,uuid:"",name:"floor",objType:"cube",width:2e3,depth:1600,height:10,style:{skinColor:7250357,skin:{skin_up:{imgurl:"floor.jpg",repeatx:!0,repeaty:!0,width:128,height:128}}}},{show:!0,uuid:"",name:"wall",objType:"wall",depth:20,width:100,height:240,style:{skinColor:11587296},wallData:[{uuid:"",name:"wall1",skin:{skin_behind:{skinColor:11587296,imgurl:"wall.png",repeatx:!0,repeaty:!0,width:128,height:128}},startDot:{x:-500,y:120,z:450},endDot:{x:500,y:120,z:450},childrens:[{op:"-",show:!0,uuid:"",name:"doorhole",objType:"doorhole",depth:20,height:220,startDot:{x:190,y:110,z:450},endDot:{x:410,y:110,z:450}},{op:"-",show:!0,uuid:"",name:"windowHole",objType:"windowHole",depth:20,height:160,startDot:{x:-450,y:130,z:450},endDot:{x:50,y:130,z:450}},{show:!0,name:"windowCaseBottom",uuid:"",objType:"cube",depth:30,height:10,startDot:{x:-450,y:50,z:450},endDot:{x:50,y:50,z:450},skinColor:12639968},{show:!0,uuid:"",name:"doorCaseRight",objType:"cube",depth:24,height:220,startDot:{x:405,y:110,z:450},endDot:{x:410,y:110,z:450},skinColor:12639968},{show:!0,name:"doorCaseLeft",uuid:"",objType:"cube",depth:24,height:220,startDot:{x:190,y:110,z:450},endDot:{x:195,y:110,z:450},skinColor:12639968},{show:!0,name:"doorCaseTop",uuid:"",objType:"cube",depth:24,height:5,startDot:{x:190,y:220,z:450},endDot:{x:410,y:220,z:450},skinColor:12639968},{show:!0,name:"doorCaseBottom",uuid:"",objType:"cube",depth:24,height:5,startDot:{x:195,y:5,z:450},endDot:{x:405,y:5,z:450},skinColor:6254705},{show:!0,name:"doorControl",uuid:"",objType:"cube",depth:10,height:40,startDot:{x:160,y:140,z:460},endDot:{x:180,y:140,z:460},skinColor:3355443,skin:{skin_fore:{skinColor:3355443,width:20,height:40,imgurl:"doorControl.jpg"}}},{show:!0,name:"doorLeft",uuid:"",objType:"cube",depth:4,height:210,skinColor:5325886,skin:{skin_fore:{imgurl:"door_left.png",transparent:!0},skin_behind:{imgurl:"door_right.png",transparent:!0}},startDot:{x:195,y:112,z:450},endDot:{x:300,y:112,z:450}},{show:!0,name:"doorRight",uuid:"",objType:"cube",depth:4,height:210,skinColor:5325886,skin:{skin_fore:{imgurl:"door_right.png",opacity:1,transparent:!0},skin_behind:{imgurl:"door_left.png",opacity:1,transparent:!0}},startDot:{x:300,y:112,z:450},endDot:{x:405,y:112,z:450}},{show:!0,uuid:"",name:"windowGlasses",objType:"glasses",depth:5,height:160,skin:{skin_fore:{imgurl:"glass.png",transparent:!0,opacity:.25,repeatx:!0,repeaty:!0},skin_behind:{imgurl:"glass.png",transparent:!0,opacity:.25,repeatx:!0,repeaty:!0}},startDot:{x:-450,y:130,z:450},endDot:{x:50,y:130,z:450}}]},{uuid:"",name:"wall2",skin:{skin_fore:{skinColor:11587296,imgurl:"wall.png",repeatx:!0,repeaty:!0,width:128,height:128}},startDot:{x:-500,y:120,z:-350},endDot:{x:500,y:120,z:-350},childrens:[{show:!0,uuid:"",name:"windowMessage",objType:"cube",depth:2,height:100,skinColor:16777215,skin:{skin_fore:{imgurl:"message.jpg"}},startDot:{x:300,y:150,z:-340},endDot:{x:350,y:150,z:-340}}]},{uuid:"",name:"wall3",skin:{skin_right:{skinColor:11587296,imgurl:"wall.png",repeatx:!0,repeaty:!0,width:128,height:128}},startDot:{x:-510,y:120,z:-360},endDot:{x:-510,y:120,z:460}},{uuid:"",name:"wall4",skin:{skin_left:{skinColor:11587296,imgurl:"wall.png",repeatx:!0,repeaty:!0,width:128,height:128}},startDot:{x:510,y:120,z:-360},endDot:{x:510,y:120,z:460},childrens:[{show:!0,uuid:"",name:"windowTV",objType:"cube",depth:10,height:120,skinColor:1118481,skin:{skin_left:{imgurl:"tv.jpg"}},startDot:{x:495,y:130,z:-190},endDot:{x:495,y:130,z:290}}]}]},{show:!0,uuid:"",name:"aircondition",objType:"cube",width:80,depth:60,height:220,x:440,y:110,z:-280,rotation:[{direction:"y",degree:-.2*Math.PI}],style:{skinColor:16448250,skin:{skin_fore:{imgurl:"aircondition.png"}}}},{show:!0,uuid:"",name:"plant",objType:"cylinderPlant",radiusTop:20,radiusBottom:15,height:40,radiusSegments:20,x:420,y:20,z:510,style:{skinColor:10972210},childrens:[{show:!0,uuid:"",name:"plantImg",objType:"plane",width:64,height:100,x:420,y:90,z:510,imgurl:"plant.png"},{show:!0,uuid:"",name:"plantImg",objType:"plane",width:64,height:100,x:420,y:90,z:510,imgurl:"plant.png",rotation:[{direction:"y",degree:.5*Math.PI}]},{show:!0,uuid:"",name:"plant",objType:"cylinderPlant",radiusTop:16,radiusBottom:14,height:2,radiusSegments:20,x:420,y:40,z:510,style:{skinColor:3289650}}]},{show:!0,uuid:"",name:"plant",objType:"cylinderPlant",radiusTop:20,radiusBottom:15,height:40,radiusSegments:10,x:160,y:20,z:510,style:{skinColor:10972210},childrens:[{show:!0,uuid:"",name:"plantImg",objType:"plane",width:64,height:100,x:160,y:90,z:510,imgurl:"plant.png"},{show:!0,uuid:"",name:"plantImg",objType:"plane",width:64,height:100,x:160,y:90,z:510,imgurl:"plant.png",rotation:[{direction:"y",degree:.5*Math.PI}]},{show:!0,uuid:"",name:"plant",objType:"cylinderPlant",radiusTop:16,radiusBottom:14,height:2,radiusSegments:20,x:160,y:40,z:510,style:{skinColor:3289650}}]},{show:!0,uuid:"",name:"plant",objType:"objPlant",objHandle:[{direction:"arb",handleScale:[.1,.1,.1]}],childrens:[{name:"plant-right",uuid:"",x:460,y:0,z:510},{name:"plant-left",uuid:"",x:120,y:0,z:510}]},{show:!0,uuid:"",name:"annihilator",objType:"objAnnihilator",objHandle:[{direction:"arb",handleScale:[.008,.008,.008],handleRotale:[0,1,0,-.5*Math.PI]}],childrens:[{name:"annihilator-one",uuid:"",x:340,y:0,z:-300},{name:"annihilator-two",uuid:"",x:300,y:0,z:-300},{name:"annihilator-three",uuid:"",x:260,y:0,z:-300}]},{show:!0,uuid:"",name:"camera",objType:"objCamera",childrens:[{name:"camera-one",uuid:"",x:-485,y:225,z:-325,objHandle:[{direction:"arb",handleScale:[.2,.2,.2],handleRotale:[0,1,0,.25*Math.PI]}]},{name:"camera-two",uuid:"",x:-485,y:225,z:425,objHandle:[{direction:"arb",handleScale:[.2,.2,.2],handleRotale:[0,1,0,.75*Math.PI]}]},{name:"camera-three",uuid:"",x:485,y:225,z:425,objHandle:[{direction:"arb",handleScale:[.2,.2,.2],handleRotale:[0,1,0,1.25*Math.PI]}]},{name:"camera-four",uuid:"",x:485,y:225,z:-325,objHandle:[{direction:"arb",handleScale:[.2,.2,.2],handleRotale:[0,1,0,1.75*Math.PI]}]}]}],events:{dbclick:[{obj_name:"doorLeft",obj_uuid:"",obj_event:function(e,t){t.openLeftDoor(e,(function(){}))}},{obj_name:"doorRight",obj_uuid:"",obj_event:function(e,t){t.openRightDoor(e,(function(){}))}},{obj_uuid:"",findObject:function(e){return e.indexOf("cabinet")>=0&&e.indexOf("door")>=0},obj_event:function(e,t){t.openCabinetDoor(e,(function(){}))}},{obj_uuid:"",findObject:function(e){return e.indexOf("equipment")>=0&&e.indexOf("server")>=0},obj_event:function(e,t){t.openEquipmentDoor(e,(function(){}))}}],mouseDown:{},mouseUp:{},mouseMove:{}},btns:[{btnid:"btn_reset",btnTitle:"场景复位",btnimg:"reset.png",clickFunction:function(e){e.resetView()}}]},b={show:!0,name:"cabinet",uuid:"",objType:"emptyCabinet",transparent:!0,size:{width:70,depth:70,height:200,thick:2},x:-350,y:100,z:-220,rotation:[{direction:"y",degree:.5*Math.PI}],style:{skin:{skin_up:{imgurl:"rack_top.jpg"},skin_down:{imgurl:"rack_top.jpg"},skin_fore:{imgurl:"rack_back.jpg"},skin_behind:{imgurl:"rack_back.jpg"},skin_left:{imgurl:"rack_back.jpg"},skin_right:{imgurl:"rack_back.jpg"}}},doors:{doorType:"lr",doorname:["cabinet_door"],skins:[{skin_fore:{imgurl:"rack_right_door.jpg"},skin_behind:{imgurl:"rack_left_door.jpg"}}]},data:{name:"",alarmInfo:[]},childrens:[{show:!0,uuid:"",name:"equipment_server1",objType:"cube",depth:65,width:65,height:10,y:5,style:{skin:{skin_up:{imgurl:"rack_inside.png"},skin_down:{imgurl:"rack_inside.png"},skin_fore:{imgurl:"server1.jpg"},skin_behind:{imgurl:"rack_inside.png"},skin_left:{imgurl:"rack_inside.png"},skin_right:{imgurl:"rack_inside.png"}}},data:{devid:"01",pointid:"0101",isalarm:!1,tipInfo:"设备1信息***",alarmInfo:""}},{show:!0,uuid:"",name:"equipment_server2",objType:"cube",depth:65,width:65,height:20,y:20,style:{skin:{skin_up:{imgurl:"rack_inside.png"},skin_down:{imgurl:"rack_inside.png"},skin_fore:{imgurl:"server2.jpg"},skin_behind:{imgurl:"rack_inside.png"},skin_left:{imgurl:"rack_inside.png"},skin_right:{imgurl:"rack_inside.png"}}},data:{devid:"01",pointid:"0102",isalarm:!1,tipInfo:"设备2信息^^^",alarmInfo:""}},{show:!0,uuid:"",name:"equipment_server3",objType:"cube",depth:65,width:65,height:10,y:191,style:{skin:{skin_up:{imgurl:"rack_inside.png"},skin_down:{imgurl:"rack_inside.png"},skin_fore:{imgurl:"server1.jpg"},skin_behind:{imgurl:"rack_inside.png"},skin_left:{imgurl:"rack_inside.png"},skin_right:{imgurl:"rack_inside.png"}}},data:{devid:"01",pointid:"0103",isalarm:!1,tipInfo:"设备3信息!!!",alarmInfo:""}},{show:!0,uuid:"",name:"equipment_server4",objType:"cube",depth:65,width:65,height:20,y:80,style:{skin:{skin_up:{imgurl:"rack_inside.png"},skin_down:{imgurl:"rack_inside.png"},skin_fore:{imgurl:"server2.jpg"},skin_behind:{imgurl:"rack_inside.png"},skin_left:{imgurl:"rack_inside.png"},skin_right:{imgurl:"rack_inside.png"}}},data:{devid:"01",pointid:"0104",isalarm:!1,tipInfo:"设备4信息~~~",alarmInfo:""}}]},k=0;k<3;k++)for(var v=0;v<6;v++){var w=JSON.parse(JSON.stringify(b));w.name="cabinet"+(k+1)+"_"+(v+1),w.data.name="JG-"+(k+1)+"-"+(v+1);for(var x=0;x<w.childrens.length;x++)w.childrens[x].data.devid=w.childrens[x].data.devid+k+v,w.childrens[x].data.pointid=w.childrens[x].data.pointid+k+v;w.y=w.y,w.x=w.x+220*k,w.z=w.z+100*v,g.objects.push(w)}var A={name:"index",created:function(){for(var e=0;e<3;e++)for(var t=0;t<6;t++)for(var i=0;i<this.baseInfo.length;i++){var n=JSON.parse(JSON.stringify(this.baseInfo[i]));n.devid=this.baseInfo[i].devid+e+t,n.pointid=this.baseInfo[i].pointid+e+t,n.name="JG-"+(e+1)+"-"+(t+1)+"-设备"+(i+1),n.id=n.devid+n.pointid,this.equipment.push(n),this.alarm.push("1")}},mounted:function(){var e={domID:"three-dom"};this.map=new y(e,g),this.map.init()},data:function(){return{map:null,dialogVisible:!1,baseInfo:[{devid:"01",pointid:"0101",name:"",level:"1",id:"",alarmInfo:"",isalarm:!1},{devid:"01",pointid:"0102",name:"",level:"1",id:"",alarmInfo:"",isalarm:!1},{devid:"01",pointid:"0103",name:"",level:"1",id:"",alarmInfo:"",isalarm:!1},{devid:"01",pointid:"0104",name:"",level:"1",id:"",alarmInfo:"",isalarm:!1}],alarmInfo:[{id:"1",name:"提示"},{id:"2",name:"次要"},{id:"3",name:"重要"},{id:"4",name:"严重"},{id:"5",name:"紧急"}],equipment:[],alarm:[],equipmentList:[],equipmentList1:[]}},methods:{set:function(){this.equipmentList=[],this.equipmentList1=[],this.dialogVisible=!0},sure:function(){for(var e=[],t=0;t<this.equipment.length;t++){for(var i=0;i<this.equipmentList.length;i++)if(this.equipmentList[i]==this.equipment[t].id){var n=JSON.parse(JSON.stringify(this.equipment[t]));n.isalarm=!0,n.level=this.alarm[t],n.alarmInfo="温度过高告警",e.push(n)}for(var o=0;o<this.equipmentList1.length;o++)this.equipmentList1[o]==this.equipment[t].id&&e.push(this.equipment[t])}console.log(e),this.map.updateAlarmStatus(e),this.dialogVisible=!1}},components:{}},j=A,C=i("2877"),z=Object(C["a"])(j,n,o,!1,null,"06e81304",null);t["default"]=z.exports},f28c:function(e,t){var i,n,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function l(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(function(){try{i="function"===typeof setTimeout?setTimeout:r}catch(e){i=r}try{n="function"===typeof clearTimeout?clearTimeout:a}catch(e){n=a}})();var h,d=[],u=!1,c=-1;function p(){u&&h&&(u=!1,h.length?d=h.concat(d):c=-1,d.length&&m())}function m(){if(!u){var e=s(p);u=!0;var t=d.length;while(t){h=d,d=[];while(++c<t)h&&h[c].run();c=-1,t=d.length}h=null,u=!1,l(e)}}function f(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new f(e,t)),1!==d.length||u||s(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);